<!DOCTYPE html>
<html lang="ht">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Acad√©mie 24 - Firebase RTDB</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link rel="stylesheet" href="css/tab.css">
    <link rel="stylesheet" href="css/panel.css">
    <link rel="stylesheet" href="css/rtdb.css">
    <link rel="stylesheet" href="css/videoTvEtHome.css">

    <style>
        :root {
            --primary: #2563eb;
            --bg: #f1f5f9;
            --card: #ffffff;
            --text: #334155;
            --success: #22c55e;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 2px;
        }
        
        img{
          width:100%;
        }

        .container { max-width: 900px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }

        .tabs {
            display: flex; 
            gap: 10px; 
            background: #e2e8f0;
            padding: 5px; 
            border-radius: 10px; 
            margin-bottom: 20px;
        }

        .tab-btn {
            flex: 1; padding: 12px; border: none; border-radius: 8px;
            cursor: pointer; font-weight: 600; background: transparent; transition: 0.3s;
        }

        .tab-btn.active { background: var(--primary); color: white; }

        .content-section { display: none; background: var(--card); padding: 10px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .content-section.active { display: block; }

        .user-list { 
          display: block; 
          gap: 20px; 
        }
        
        .user-card { border: 1px solid #e2e8f0; padding: 15px; border-radius: 10px; position: relative; }
        .progress-container { margin-top: 10px; }
.progress-label { display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 4px; }
.progress-bar { height: 6px; background: #e2e8f0; border-radius: 10px; overflow: hidden; }
.progress-fill { height: 100%; background: var(--success); transition: width 0.3s ease; }

        
        .status-badge {
            position: absolute; top: 10px; right: 10px; font-size: 10px;
            padding: 3px 8px; border-radius: 10px; background: #dcfce7; color: #166534;
        }

        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { text-align: left; padding: 12px; border-bottom: 1px solid #f1f5f9; }
        th { color: var(--primary); }

        .loader { text-align: center; padding: 20px; font-style: italic; color: var(--primary); }
    </style>
    <style>
      
.menu{
  display: flex;
  justify-content: center;
  align-items: center;
}
nav {
  display: grid;
  grid-template-columns: repeat(5, 1fr); /* 5 kol√≤n egal */
  gap: 10px; /* espas ant chak card */
  padding: 2px;
  background-color: #f5f5f5;
}

/* Style pou chak link (card) */
nav a {
  text-decoration: none;
  color: #333;
  flex: 1 1 50px; /* adapte card selon gwos√® ekran */
  max-width: 200px;
}

nav a div {
  background-color: white;
  border-radius: 15px;
  padding: 5px;
  text-align: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  transition: transform 0.2s, box-shadow 0.2s;
}

/* Ef√® hover */
nav a div:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

/* Icon style */
nav i {
  font-size: 20px;
  margin-bottom: 10px;
  display: block;
  color: #ff6600; /* Chanje koul√® ikon si ou vle */
}

/* Text anba ikon */
nav p {
  font-size: 14px;
  font-weight: bold;
}

/* Pou f√® 5 cards ranje byen */
@media (min-width: 1200px) {
  nav a {
    flex: 1 1 calc(20% - 20px); /* 5 kol√≤n */
  }
}
    </style>
    <style>
      /* Popup full screen */
.poplog {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.7); /* fon nwa semi-transparent */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999; /* toujou sou tout l√≤t kontni */
}

/* F√≤m login */
.poplog > div {
  background: #fff; /* f√≤m blan */
  padding: 40px 30px;
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  width: 300px;
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

/* Input style */
.poplog input {
  padding: 12px 15px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 16px;
  outline: none;
}

/* Bouton style */
.poplog button {
  padding: 12px;
  border: none;
  border-radius: 8px;
  background-color: #ff6600;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s;
}

.poplog button:hover {
  background-color: #e65c00;
}
    </style>
    <style>
/* F√≤m Ajoute Itilizat√® */
#addUserForm {
  background: #fff;
  padding: 20px 30px;
  border-radius: 15px;
  max-width: 500px;
  margin: 0 auto 30px auto;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
}

#addUserForm input, 
#addUserForm select {
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 16px;
  outline: none;
}

#addUserForm button {
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  background-color: #ff6600;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s;
}

#addUserForm button:hover {
  background-color: #e65c00;
}

/* Tablo lis itilizat√® */
#userTable {
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
  border-collapse: collapse;
  background: #fff;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

#userTable th, #userTable td {
  padding: 12px 15px;
  text-align: center;
}

#userTable th {
  background-color: #ff6600;
  color: white;
}

#userTable tr:nth-child(even) {
  background-color: #f9f9f9;
}

#userTable tr:hover {
  background-color: #ffe6cc;
}

/* Dropdown pou chanje role */
#userTable select {
  padding: 5px 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14px;
  outline: none;
}

/* Bouton delete */
#userTable button {
  padding: 5px 10px;
  border: none;
  border-radius: 6px;
  background-color: #ff4d4d;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s;
}

#userTable button:hover {
  background-color: #e60000;
}
    </style>
</head>
<body>
  <div class="btnTab">
    <button class="tab-btn active" data-target="usersTab">Users</button>
    <button class="tab-btn" data-target="visiteTab">Visites</button>
      <button class="tab-btn" data-target="videosTab">Videos</button>
        <button class="tab-btn" data-target="panelTab">Panel</button>
                <button class="tab-btn" data-target="rtdbTab">Rtdb</button>
</div>
  <div class="btnTab">
  <a href="admArticle.html"><button>Article</button></a>
  <a href="coursadm.html"><button>Cours</button></a>
  <a href="Admpodcast.html"><button>Serie</button></a>
    <a href="AdmChaineRj4droid.html"><button>Chaine</button></a>
    <a href="AdmLivre.html"><button>Livre</button></a>
      <a href="FormationAdm.html"><button>Formation</button></a>
</div>

  <main>
    <div id="usersTab" class="tab-content active">
              <div id="userList" class="user-list">
            <div class="loader">Ap chaje itilizat√® yo...</div>
        </div>
    </div>
    
    <div id="visiteTab" class="tab-content">
      <span>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
        <h3>Istorik Vizit</h3>
        <div style="display: flex; gap: 10px; align-items: center;">
            <span id="totalVisites" style="background: var(--primary); color: white; padding: 5px 12px; border-radius: 20px; font-size: 12px;">Total: 0</span>
            <button id="btnDeleteSelected" onclick="deleteSelectedVisits()" style="display: none; background: #ef4444; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; font-weight: bold;">
                üóëÔ∏è Efase sa k seleksyone yo
            </button>
        </div>
    </div>

    <div style="background: #e2e8f0; padding: 10px; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
        <input type="checkbox" id="selectAllVisits" onchange="toggleSelectAll(this)" style="width: 18px; height: 18px; cursor: pointer;">
        <label for="selectAllVisits" style="font-size: 13px; font-weight: bold; cursor: pointer;">Seleksyone Tout</label>
    </div>

    <div style="display:none;" id="visitList">
        </div>
      </span>
      
      <section id="admin" class="tab">
  <h2><a href="AdmChaine.html">Adm</a></h2>
<div class="atabbtn">
  <button data-target="tabPays">Pays</button>
  <button data-target="tabPages">Pages</button>
  <button data-target="tabOnline">Online</button>
  <button data-target="tabBrowsers">Browser</button>
</div>

<div id="statsContainer" class="stats-container">
  <h2>üìä Statistiques en temps r√©el</h2>

  <div class="atab" id="tabPays">
    <h3>üåç Pays</h3>
    <ul id="statsListPays" class="stats-list"></ul>
  </div>
  
  <div class="atab" id="tabPages">
    <h3>üìÑ Pages les plus visit√©es</h3>
    <ul id="statsListPages" class="stats-list"></ul>
  </div>
  
  <div class="atab" id="tabOnline">
    <h3>üü¢ Utilisateurs en ligne</h3>
    <ul id="statsListUserOnline" class="stats-list"></ul>
  </div>
  
  <div class="atab" id="tabBrowsers">
    <h3>üß≠ Navigateurs</h3>
    <ul id="statsListBrowsers" class="stats-list"></ul>
  </div>
</div>

<script>
const tabButtons = document.querySelectorAll('.atabbtn button');
const tabs = document.querySelectorAll('.atab');

tabButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    // Retire active sou tout bouton
    tabButtons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    // Kache tout tab
    tabs.forEach(t => {
      t.classList.remove('active');
      t.style.display = 'none';
    });

    // Montre tab ki koresponn ak data-target
    const targetId = btn.dataset.target;
    const targetTab = document.getElementById(targetId);
    if(targetTab) {
      targetTab.style.display = 'flex';
      targetTab.classList.add('active');
    }
  });
});

// Inisyalize premye tab k√≤m aktif
if(tabButtons.length > 0) tabButtons[0].click();
</script>

<style>
.atabbtn button.active {
  background-color: #007bff;
  color: #fff;
}
.atabbtn button {
  padding: 6px 12px;
  margin-right: 5px;
  cursor: pointer;
  border: 1px solid #007bff;
  border-radius: 4px;
  background: #fff;
  color: #007bff;
}
</style>
</section>
    </div>
    
    <div class="tab-content" id="videosTab">
  <div style="display:flex; flex-direction:column; gap:10px; max-width:400px; margin:20px;">
    <span>
    <div class="admin-card">
        <h3>Ajouter vid√©o</h3>
        <input type="text" id="title" placeholder="Titre">
        <textarea id="description" placeholder="Description"></textarea>
        <input type="text" id="url" placeholder="URL (YouTube ou MP4)">
        
        <label style="display:block; margin-bottom:5px; font-size:12px; color:lime;">Planifier la mise en ligne (Optionnel) :</label>
        <input type="time" id="scheduleTime">
        
        <button id="addVideo">Ajouter vid√©o</button>
    </div>
    </span>
  </div>

  <div  style="max-width:500px; margin:20px; display:flex; flex-direction:column; gap:10px;">
       <h2>üìÇ Liste des vid√©os</h2>
        <div id="adminVideoList"></div>
  </div>
    </div>
    
    <div class="tab-content" id="panelTab">
      <h2>Admin Panel - Jesyon Itilizat√®</h2>

<!-- F√≤m Ajoute Itilizat√® -->
        <div id="addUserForm">
  <input type="text" id="newUsername" placeholder="Username">
  <input type="password" id="newPassword" placeholder="Password">
  <select id="newRole">
    <option value="admin">Admin</option>
    <option value="moderator">Moderator</option>
    <option value="user">User</option>
  </select>
  <button onclick="addUser()">Ajoute Itilizat√®</button>
</div>

<!-- Lis Itilizat√® -->
<h3>Lis Itilizat√®</h3>
<div id="userCards" class="user-cards"></div>
    </div>
    <div id="rtdbTab" class="tab-content">
      <input type="text" id="searchInput" placeholder="Search objects or categories..." style="width:95%; padding:10px; margin:auto; margin-bottom:15px; border-radius:8px; border:none;">
        <div id="projectContainer"></div>
    </div>
  </main>

<script src="js/tab.js" defer></script>
<script src="js/config.js" defer></script>
<script src="js/users.js" defer></script>
<script src="js/panel.js" defer></script>
<script src="js/rtdb.js" defer></script>
<script src="js/visiteShow.js" defer></script>
<script src="js/videoTvEtHome.js" defer></script>
</body>
</html>
